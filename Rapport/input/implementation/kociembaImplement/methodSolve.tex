\section{Method Solve}


The method \textit{solve} connects all the submethods into one big method that apply Kociemba's algorithm onto the \rubik{}. 
It start with initializing five variables; 
a \textit{result} array which will contain the final move sequence, an integer \textit{d} which will determine the search depth, 
an integer \textit{l} which also is used to determine the search depth, 
an array \textit{b} which will contain the move sequence until the \rubik{} enters \textit{H} 
and an array \textit{c} which will be the move sequence after the \rubik{} has entered \textit{H}.
%evt s√¶tte de 5 variabler i punktform??

\begin{lstlisting}[style=sourceCode, caption=\myCaption{Key point in the code to kociemba's optimal solver}, label=src:kociemba]
try {
	c = solveFromH(l - d);
	if (d + c.length < l) {
		curTime = System.currentTimeMillis();
		l = d + c.length;
		result = new MoveButtons[l];
		output.addTextln("The solutions of the length " + l + ". The solution is:");
		int j = 0;
		for ( ; j < d; j++) {
			result[j] = b[j];
			output.addText(b[j] + " ");
		}
		for (int k = 0 ; k < c.length; k++,j++) {
			result[j] = c[k];
			output.addText(c[k] + " ");
		}
		output.addTextln("");
		output.addTextln("Time spend: " + ((curTime - startTime)/1000) + " seconds");
	}
} catch (InvalidCube e) {}
\end{lstlisting}

\begin{verbatim}
			
			try {
				while (true) {
					try {
						c = solveFromH(l - d);
\end{verbatim}
The program start with The \textit{solveFromH} method test if the cube is in H. If that is the case it will start solving the cube with \textit{U} and \textit{D} twists.

\begin{verbatim}
						if (d + c.length < l) {
							l = d + c.length;
							result = new MoveButtons[l];
							output.addTextln("The solutions of the length " + l + ". The solution is:");
							int j = 0;
							for ( ; j < d; j++) {
								result[j] = b[j];
								output.addText(b[j] + " ");
							}
							for (int k = 0 ; k < c.length; k++,j++) {
								result[j] = c[k];
								output.addText(c[k] + " ");
							}
							output.addTextln("");
							output.addTextln("Time spend: " + ((curTime - startTime)/1000) + " seconds");
						}
\end{verbatim}
Thereafter it test if the length \textit{d} + \textit{c}'s length is lower than the length of \textit{l}. 
If that is true \textit{l} will be set as the product of \textit{d} + \textit{c} size and the result array will be initialized with \textit{l}. 
In The \textit{result} array the move sequence \textit{b} and the movesequence \textit{c} is added and the console will print a solution and the time it took in seconds.

\begin{verbatim}
					} catch (InvalidCube e) {}
					try {
						Cube.permute(cube, b[d-1].invert());
						b[d-1].invert();
					} catch (ArrayIndexOutOfBoundsException e) {}

					increaseWithSNotEndingWithA(b, d-1);
					
\end{verbatim}
After the program has tested if(d + c.length < l) the program will permute the cube back by the lenght of d and start the \textit{increaseWithSNotEndingWithA} method.

\begin{verbatim}
			}
			} catch (UnableToIncreaseMoveSequenceException e) {}

			d++;
		}
		return result;
	}
\end{verbatim}

After the  \textit{increaseWithSNotEndingWithA} method the program counts the \textit{d} integer up by one. 
When the program is unable to find a solution length shorter than the last solution it will return the \textit{result} array.